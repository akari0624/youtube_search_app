(this.webpackJsonpyoutube_searcher=this.webpackJsonpyoutube_searcher||[]).push([[8],{33:function(n,e,t){"use strict";t.r(e);var r=t(8),o=t(35),a=t(0),i=t.n(a),c=t(63),u=function(n){var e=n.dotColor;return i.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"30",height:"30",viewBox:"0 0 30 30"},i.a.createElement("path",{fill:e,fillRule:"evenodd",d:"M6.5 12C7.88 12 9 13.12 9 14.5S7.88 17 6.5 17 4 15.88 4 14.5 5.12 12 6.5 12zm8 0c1.38 0 2.5 1.12 2.5 2.5S15.88 17 14.5 17 12 15.88 12 14.5s1.12-2.5 2.5-2.5zm9 0c1.38 0 2.5 1.12 2.5 2.5S24.88 17 23.5 17 21 15.88 21 14.5s1.12-2.5 2.5-2.5z"}))};u.defaultProps={dotColor:"#FFF"};var l=function(n){var e=n.dotColor,t=Object(c.a)(n,["dotColor"]);return i.a.createElement("span",t,i.a.createElement(u,{dotColor:e}))},s=t(36);function d(){var n=Object(o.a)(["\n  position: fixed;\n  width: 100%;\n  height: 100%;\n  top: 0px;\n  left: 0px;\n  opacity: 0;\n  display: ","\n"]);return d=function(){return n},n}function f(){var n=Object(o.a)(["\n  position: absolute;\n  top: -8px;\n  right: ",";\n  width: 0;\n  height: 0;\n  border-style: solid;\n  border-width: 0 7.5px 13.0px 7.5px;\n  border-color: ",";\n  /* right: ",";\n  top: */\n"]);return f=function(){return n},n}function p(){var n=Object(o.a)(["\n\tposition: fixed;\n  transform: ",";\n  display: ",";\n\tright: ",";\n  transform: ",";\n"]);return p=function(){return n},n}function m(){var n=Object(o.a)(["\n  position: relative;\n  z-index: 8000;\n"]);return m=function(){return n},n}var v=s.a.div(m()),g=s.a.div(p(),(function(n){return"translate3d(".concat(n.top||0,"px, ").concat(n.left||0,"px, 20px);")}),(function(n){return n.isShow?"block":"none"}),(function(n){return n.onRightEdge&&"6px"}),(function(n){var e=n.offsetUpPX;return"translate3d(0px, ".concat(e?"-".concat(e,"px"):"0px",", 20px);")})),b=s.a.div(f(),(function(n){return n.onRightEdge&&"7px"}),(function(n){return"transparent transparent ".concat(n.color||"#FFFFFF"," transparent;")}),(function(n){return n.onRightEdge&&"5px"})),x=s.a.div(d(),(function(n){return n.isShow?"block":"none"})),h=function(n){var e=n.children,t=n.CompToRender,o=n.onRightEdge,u=n.offsetUpPX,l=Object(c.a)(n,["children","CompToRender","onRightEdge","offsetUpPX"]),s=Object(a.useState)(!1),d=Object(r.a)(s,2),f=d[0],p=d[1];return i.a.createElement(i.a.Fragment,null,i.a.createElement(x,{isShow:f,onClick:function(){p(!1)}}),i.a.createElement(v,null,i.a.createElement("div",{onClick:function(){p((function(n){return!n}))}},e),i.a.createElement(g,Object.assign({isShow:f,onRightEdge:o,offsetUpPX:u},l),i.a.createElement(b,{onRightEdge:o}),i.a.createElement(t,null))))},w=t(105),j=t(84);var O=function(n){var e=n.onSubmit,t=n.searchText,r=Object(j.a)(),o=r.handleSubmit,a=r.register;return r.errors,i.a.createElement("form",{onSubmit:o(e)},i.a.createElement(w.a,{defaultValue:t,name:"keywords",inputRef:a({}),inputProps:{"aria-label":"description"}}),i.a.createElement("button",{type:"submit"},"\u9001\u51fa\u67e5\u8a62"))},E=t(1),C=t(41);function y(){var n=Object(o.a)(["\n  width: 100vw;\n  display: flex;\n  padding: 3px 0px;\n  justify-content: center;\n  z-index: 5;\n  @media (max-width: 740px) {\n    background: #ffffff;\n    position: fixed;\n    top: 0px;\n    animation: "," 0.5s linear forwards;\n  }\n"]);return y=function(){return n},n}function F(){var n=Object(o.a)(["\n  width: 100vw;\n  display: flex;\n  padding: 3px 0px;\n  justify-content: center;\n  z-index: 5;\n  @media (max-width: 740px) {\n    background: #ffffff;\n    position: fixed;\n    top: 0px;\n    animation: "," 0.5s linear forwards;\n  }\n"]);return F=function(){return n},n}function S(){var n=Object(o.a)(["\n  from {\n    transform: translateY(-34px); \n  }\n\n  to {\n    transform: translateY(0px);\n  }\n"]);return S=function(){return n},n}function k(){var n=Object(o.a)(["\n  from {\n    transform: translateY(0px); \n  }\n\n  to {\n    transform: translateY(-36px);\n  }\n"]);return k=function(){return n},n}var P=Object(s.b)(k()),T=Object(s.b)(S()),R=s.a.div(F(),T),I=s.a.div(y(),P),N=function(){var n=Object(E.f)();return i.a.createElement("button",{onClick:function(){n.push("/collections")}},"to\u6536\u85cf\u9801")};var J=function(n){var e=n.onSubmit,t=n.searchText;return Object(C.a)()?i.a.createElement(I,null,i.a.createElement(O,{placeholder:"\u641c\u5c0b",onSubmit:e,searchText:t}),i.a.createElement(h,{CompToRender:N,onRightEdge:!0,offsetUpPX:4},i.a.createElement(l,{dotColor:"#808080"}))):i.a.createElement(R,null,i.a.createElement(O,{placeholder:"\u641c\u5c0b",onSubmit:e,searchText:t}),i.a.createElement(h,{CompToRender:N,onRightEdge:!0,offsetUpPX:4},i.a.createElement(l,{dotColor:"#808080"})))},Y=t(48),D=t(52),M=t(50),z=t(54),U=t.n(z),X=t(61),L=t(55),W=t(44),_=t.n(W),q=t(75),B=t.n(q),V=function(){var n=Object(L.a)(U.a.mark((function n(e){var t,r,o,a,i,c,u,l,s,d;return U.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,fetch(e);case 3:return o=n.sent,B()(o.ok,"error: ".concat(o.status)),n.next=7,o.json();case 7:if(a=n.sent,B()(!a.error,"error: ".concat(null===a||void 0===a||null===(t=a.error)||void 0===t?void 0:t.message)),i=(null===a||void 0===a||null===(r=a.pageInfo)||void 0===r?void 0:r.totalResults)>50,c=null===a||void 0===a?void 0:a.nextPageToken,!i||!c){n.next=21;break}return n.next=14,fetch(e+"&pageToken=".concat(c));case 14:return s=n.sent,B()(s.ok,"error: ".concat(s.status)),n.next=18,s.json();case 18:d=n.sent,B()(!d.error,"error: ".concat(null===d||void 0===d||null===(u=d.error)||void 0===u?void 0:u.message)),(l=a.items).push.apply(l,Object(X.a)(d.items));case 21:return n.abrupt("return",a);case 24:n.prev=24,n.t0=n.catch(0),console.error(n.t0),_.a.fire({icon:"error",titleText:"\u767c\u751f\u932f\u8aa4",text:n.t0.message});case 28:return n.abrupt("return",null);case 29:case"end":return n.stop()}}),n,null,[[0,24]])})));return function(e){return n.apply(this,arguments)}}(),A=function(){var n=Object(L.a)(U.a.mark((function n(e){var t,r,o;return U.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,fetch(e);case 3:return r=n.sent,B()(r.ok,"error: ".concat(r.status)),n.next=7,r.json();case 7:return o=n.sent,B()(!o.error,"error: ".concat(null===o||void 0===o||null===(t=o.error)||void 0===t?void 0:t.message)),console.log("result3",o),n.abrupt("return",o);case 13:n.prev=13,n.t0=n.catch(0),_.a.fire({icon:"error",titleText:"\u767c\u751f\u932f\u8aa4",text:n.t0.message});case 16:return n.abrupt("return",null);case 17:case"end":return n.stop()}}),n,null,[[0,13]])})));return function(e){return n.apply(this,arguments)}}(),G=t(83),H=t(19),K=t(39);function Q(){var n=Object(o.a)(["\n  display: flex;\n  justify-content: center;\n  width: 100vw;\n  margin-top: 32px;\n  margin-bottom: 38px;\n"]);return Q=function(){return n},n}var Z=s.a.section(Q());e.default=function(){var n,e,t=Object(a.useContext)(H.a),o=t.searchText,c=t.setSearchText,u=t.mainPageCurrPageNumber,l=t.setMainPageCurrPageNumber,s=Object(G.a)((e=o)?"https://www.googleapis.com/youtube/v3/search?part=snippet&q=".concat(e,"&chart=mostPopular&type=video&maxResults=").concat(50,"&key=").concat(""):null,V,{revalidateOnFocus:!1}),d=s.data,f=(s.error,null===d||void 0===d?void 0:d.pageInfo,null!==(n=null===d||void 0===d?void 0:d.items)&&void 0!==n?n:[]),p=f.length,m=Object(K.d)(u,12),v=Object(r.a)(m,2),g=v[0],b=v[1],x=f.length>0?f.slice(g,b):[],h=Object(G.a)(function(n){if(!n||0===(null===n||void 0===n?void 0:n.length))return null;var e,t=function(n){return n.reduce((function(n,e){var t;return(null===e||void 0===e||null===(t=e.id)||void 0===t?void 0:t.videoId)?n+="".concat(e.id.videoId,","):n}),"")}(n),r=t.substring(0,t.length-1);return(e=r)?"https://www.googleapis.com/youtube/v3/videos?part=contentDetails&id=".concat(e,"&key=").concat(""):null}(x),A,{revalidateOnFocus:!1}),w=h.data;h.error,w&&x.forEach((function(n,e){var t,r;n.duration=null===w||void 0===w||null===(t=w.items[e])||void 0===t||null===(r=t.contentDetails)||void 0===r?void 0:r.duration}));var j=Object(a.useCallback)((function(n,e){l(e),window.scrollTo(0,0)}),[]);return i.a.createElement("main",null,i.a.createElement(J,{onSubmit:function(n){c((function(e){return n.keywords}))},searchText:o}),i.a.createElement(Z,null,i.a.createElement(Y.a,null,x.map((function(n){return i.a.createElement(D.a,{key:n.id.videoId,item:n})})))),function(n,e,t,r){if(n>0){var o=Object(K.c)(n,e);return i.a.createElement(M.a,{nowPage:r,pagesCount:o,rowsPerPage:12,onChangePage:t})}return null}(p,12,j,u))}},39:function(n,e,t){"use strict";t.d(e,"b",(function(){return c})),t.d(e,"e",(function(){return u})),t.d(e,"a",(function(){return l})),t.d(e,"g",(function(){return s})),t.d(e,"c",(function(){return d})),t.d(e,"d",(function(){return f})),t.d(e,"f",(function(){return p}));var r=t(44),o=t.n(r),a=t(49),i=t.n(a),c=function(n){var e=window.localStorage.getItem("videoCollections"),t=e&&JSON.parse(e);return t&&t[n]},u=function(){var n=window.localStorage.getItem("videoCollections");return n&&JSON.parse(n)},l=function(n,e){try{window.localStorage.getItem("videoCollections")||window.localStorage.setItem("videoCollections",JSON.stringify(Object.create(null)));var t=JSON.parse(window.localStorage.getItem("videoCollections"));return t[n]=e,window.localStorage.setItem("videoCollections",JSON.stringify(t)),!0}catch(r){return console.error("add video to collections error:",r),o.a.fire({icon:"error",titleText:"\u6dfb\u52a0\u6536\u85cf\u6642\u767c\u751f\u932f\u8aa4",text:r.message}),!1}},s=function(n){if(window.localStorage.getItem("videoCollections")){var e=JSON.parse(window.localStorage.getItem("videoCollections"));try{return delete e[n],window.localStorage.setItem("videoCollections",JSON.stringify(e)),!0}catch(t){return console.error("remove video from collections error:",t),o.a.fire({icon:"error",titleText:"\u79fb\u9664\u6536\u85cf\u6642\u767c\u751f\u932f\u8aa4",text:t.message}),!1}}else o.a.fire({icon:"error",titleText:"\u932f\u8aa4",text:"\u76ee\u524d\u6c92\u6709\u6536\u85cf"})},d=function(n,e){var t=Math.floor(n/e);return n%e>0?t+1:t},f=function(n,e){var t=n*e;return[t-e,t]},p=function(n){if(!n)return"\u7121\u6cd5\u53d6\u5f97\u5f71\u7247\u9577\u5ea6";var e=i.a.duration(n),t=e.hours(),r=e.minutes(),o=e.seconds();return"".concat(Number(t)?t+"\u6642":""," ").concat(Number(r)?r+"\u5206":""," ").concat(Number(o)?o+"\u79d2":"")}},41:function(n,e,t){"use strict";t.d(e,"a",(function(){return c}));var r=t(8),o=t(0),a=t(47),i=t.n(a);function c(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:30,e=Object(o.useState)(!1),t=Object(r.a)(e,2),a=t[0],c=t[1],u=Object(o.useRef)(!1),l=Object(o.useRef)(0),s=function(){var e=window.pageYOffset;console.log("nowScrollTop, previousScrollTopRef",e,l.current),e>l.current&&!u.current&&l.current>0?(u.current=!u.current,c(!0)):e<l.current&&u.current&&(u.current=!u.current,c(!1)),Math.abs(e-l.current)>=n&&(l.current=e)},d=i()(s,500);return Object(o.useEffect)((function(){return window.addEventListener("scroll",d),function(){window.removeEventListener("scroll",d)}}),[]),a}},48:function(n,e,t){"use strict";var r=t(35),o=t(0),a=t.n(o);function i(){var n=Object(r.a)(["\n  display: flex;\n  width: 90vw;\n  flex-wrap: wrap;\n  justify-content: space-between;\n\n  @media (max-width: 740px) {\n    justify-content: center; /** make one row */\n  }\n"]);return i=function(){return n},n}var c=t(36).a.section(i());e.a=function(n){var e=n.children;return a.a.createElement(c,null,e)}},50:function(n,e,t){"use strict";t.d(e,"a",(function(){return b}));var r=t(35),o=t(0),a=t.n(o),i=t(104),c=t(36),u=t(41);function l(){var n=Object(r.a)(["\n    width: 100vw;\n    display: flex;\n    padding: 3px 0px;\n    justify-content: center;\n    & > *: {\n      marginTop: .2rem,\n    }\n    @media(max-width: 740px) {\n      background: #FFFFFF;\n      position: fixed;\n      bottom: -34px;\n      animation: "," .5s linear forwards;\n    }\n"]);return l=function(){return n},n}function s(){var n=Object(r.a)(["\n    width: 100vw;\n    display: flex;\n    padding: 3px 0px;\n    justify-content: center;\n    & > *: {\n      marginTop: .2rem,\n    }\n    @media(max-width: 740px) {\n      background: #FFFFFF;\n      position: fixed;\n      bottom: 0px;\n      animation: "," .5s linear forwards;\n    }\n"]);return s=function(){return n},n}function d(){var n=Object(r.a)(["\n  from {\n    transform: translateY(0px); \n  }\n\n  to {\n    transform: translateY(34px);\n  }\n"]);return d=function(){return n},n}function f(){var n=Object(r.a)(["\n  from {\n    transform: translateY(34px); \n  }\n\n  to {\n    transform: translateY(0px);\n  }\n"]);return f=function(){return n},n}var p=Object(c.b)(f()),m=Object(c.b)(d()),v=c.a.div(s(),p),g=c.a.div(l(),m);function b(n){var e=n.pagesCount,t=n.rowsPerPage,r=(n.totalPage,n.onChangePage),o=n.nowPage;return Object(u.a)()?a.a.createElement(g,null,a.a.createElement(i.a,{count:e,onChange:r,page:o,variant:"outlined",shape:"rounded",rowsPerPage:t})):a.a.createElement(v,null,a.a.createElement(i.a,{count:e,onChange:r,page:o,variant:"outlined",shape:"rounded",rowsPerPage:t}))}},52:function(n,e,t){"use strict";var r=t(8),o=t(35),a=t(0),i=t.n(a),c=t(36),u=t(1),l=t(39);function s(){var n=Object(o.a)(["\n  padding: 2px;\n  color: #FFFFFF;\n  background: #6699FF;\n  border-radius: 5px;\n  cursor:pointer;\n"]);return s=function(){return n},n}function d(){var n=Object(o.a)(["\n  padding: 2px;\n  color: #FFFFFF;\n  background: #008008;\n  border-radius: 5px;\n  margin-right: 4px;\n  cursor:pointer;\n"]);return d=function(){return n},n}function f(){var n=Object(o.a)(["\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  z-index: 2;\n  background: rgba(0, 0, 0, 0.4);\n  display: flex;\n  justify-content: center;\n  align-items: center;\n"]);return f=function(){return n},n}var p=c.a.section(f()),m=c.a.div(d()),v=c.a.div(s());var g=function(n){var e=n.onMouseLeave,t=n.itemData,o=n.onCancelCollectionDone,c="".concat(t.id.kind,".").concat(t.id.videoId||t.id.channelId),s=Object(u.f)(),d=Object(l.b)(c),f=Object(a.useState)(d),g=Object(r.a)(f,2),b=g[0],x=g[1];return i.a.createElement(p,{onMouseLeave:e},b?i.a.createElement(m,{onClick:function(){Object(l.g)(c)&&(x(!1),o&&o())}},"\u53d6\u6d88\u6536\u85cf"):i.a.createElement(m,{onClick:function(){Object(l.a)(c,t)&&x(!0)}},"\u52a0\u5165\u6536\u85cf"),i.a.createElement(v,{onClick:function(){s.push("/player",{itemData:t})}},"\u64ad\u653e\u5f71\u7247"))};function b(){var n=Object(o.a)(["\n  margin: 0.4rem;\n  width: 320px;\n  word-wrap: break-word;\n  .imgWrapper {\n    display: flex;\n    justify-content: center;\n  } \n\n  .title {\n    margin-bottom: .3rem;\n  }\n\n  .description{\n    margin-bottom: .3rem;\n  }\n\n  .duration{\n  }\n"]);return b=function(){return n},n}var x=c.a.article(b());function h(){var n=Object(o.a)(["\n  position: relative;\n"]);return h=function(){return n},n}var w=c.a.section(h());e.a=function(n){var e=n.item,t=n.onCancelCollectionDone,o=Object(a.useState)(!1),c=Object(r.a)(o,2),u=c[0],s=c[1];return i.a.createElement(x,null,i.a.createElement(w,{onClick:function(n){s((function(n){return!n}))},onMouseEnter:function(n){s(!0)}},u&&i.a.createElement(g,{onMouseLeave:function(n){s(!1)},itemData:e,onCancelCollectionDone:t}),i.a.createElement("div",{className:"imgWrapper"},i.a.createElement("img",{src:e.snippet.thumbnails.medium.url,alt:e.title}))),i.a.createElement("h3",{className:"title"},e.snippet.title),i.a.createElement("div",{className:"description"},e.snippet.description),i.a.createElement("div",{className:"duration"},Object(l.f)(e.duration)))}}}]);
//# sourceMappingURL=8.4dbfb03e.chunk.js.map